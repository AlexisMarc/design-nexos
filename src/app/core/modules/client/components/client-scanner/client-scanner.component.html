<div class="w-full h-svh fixed z-20 top-0 left-0 flex justify-center items-center backdrop-blur">
    <div class="w-full flex justify-center">
        @if (showWebcam) {
        <webcam [height]="height" [width]="width" [trigger]="triggerObservable" (imageCapture)="handleImage($event)"
            [allowCameraSwitch]="true" [switchCamera]="nextWebcamObservable" [imageQuality]="1"
            (cameraSwitched)="cameraWasSwitched($event)" (initError)="handleInitError($event)">
        </webcam>
        } @else if(webcamImage) {
        <img class="w-full" [src]="webcamImage.imageAsDataUrl" />
        }
        <!-- <canvas [ngClass]="{'hidden': !webcamImage}" #myCanvas [width]="width" [height]="height"></canvas> -->
    </div>
    <div class="fixed z-10 bottom-6 left-0 w-full flex justify-center items-center gap-8">
        @if (showWebcam) {
        <button class="b-primary p-4" (click)="triggerSnapshot()">
            <svg class="w-8 h-8 fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                <path
                    d="M480-260q75 0 127.5-52.5T660-440q0-75-52.5-127.5T480-620q-75 0-127.5 52.5T300-440q0 75 52.5 127.5T480-260Zm0-80q-42 0-71-29t-29-71q0-42 29-71t71-29q42 0 71 29t29 71q0 42-29 71t-71 29ZM160-120q-33 0-56.5-23.5T80-200v-480q0-33 23.5-56.5T160-760h126l74-80h240l74 80h126q33 0 56.5 23.5T880-680v480q0 33-23.5 56.5T800-120H160Zm0-80h640v-480H638l-73-80H395l-73 80H160v480Zm320-240Z" />
            </svg>
        </button>
        }
        @else if(webcamImage) {
        <button class="b-primary p-4" (click)="clearImage()">
            <svg class="w-8 h-8 fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                <path
                    d="M280-200v-80h284q63 0 109.5-40T720-420q0-60-46.5-100T564-560H312l104 104-56 56-200-200 200-200 56 56-104 104h252q97 0 166.5 63T800-420q0 94-69.5 157T564-200H280Z" />
            </svg>
        </button>
        <button class="b-primary p-4" (click)="saveImage()">
            <svg class="w-8 h-8 fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
                <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z" />
            </svg>
        </button>
        }
    </div>
</div>